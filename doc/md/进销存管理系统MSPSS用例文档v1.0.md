# <center>进销存管理系统</center>



#<center>MSPSS(Management System of Purchase-Sell-Stock)</center> 

<br><br><br>

# <center>用例文档</center><br><center>v1.0 正式版</center>

<br><br><br>

##<center>南京大学FX工作组</center><br><center>伏家兴，韩新虎，刘雅歆，徐光耀</center><br><center>2017-09-20</center>

## 更新历史

| **修改人员** | **日期**     | **变更原因** | **版本号**   |
| -------- | ---------- | -------- | --------- |
| FX全组人员   | 2017-09-13 | 最初草稿     | V1.0  草稿  |
| FX全组人员   | 2011-09-20 | 评审后的正式版  | V1.0  正式版 |
|          |            |          |           |
|          |            |          |           |



# 1.引言

## 1.1目的

本文档描述了进销存管理系统的用户需求。

 

## 1.2阅读说明

文档内用例的描述使用了附表1的模版。

## 1.3参考文献

软件开发的技术基础 2012年12月第一版

# 2.用例列表

 

| **参与者** | **用例**                                   |
| :-----: | ---------------------------------------- |
| 库存管理人员  | 1.商品分类  2.商品管理  3.库存查看  4.库存盘点  5.处理库存单据 |
| 进货销售人员  | 1.客户管理  2.制定进货和进货退货单  3.制定销售和销售退货单       |
|  财务人员   | 1.账户管理  2.制定收款单及现金费用单 3.制定付款单  4.查看导出报表  5.期初建账  6.查询日志 |
|   总经理   | 1.审批单据  2.查看导出报表  3.制定促销策略  4.查询日志       |

  

# 3.详细用例描述

 ### 用例1  商品分类

| ID          | 1                                        |
| ----------- | ---------------------------------------- |
| **最后一次更新者** | 韩新虎                                      |
| **创建者**     | 韩新虎                                      |
| **创建日期**    | 2017-9-14                                |
| **最后更新日期**  | 2017-9-18                                |
| **参与者**     | 库存管理人员，目标是有效进行商品分类，对商品分类信息及时更新。          |
| **触发条件**    | 所存的商品分类信息发生变化。                           |
| **前置条件**    | 库存管理人员必须已经被识别和授权。                        |
| **后置条件**    | 系统存储被修改的商品分类信息，并且更新数据库。                  |
| **优先级**     | 高                                        |
| **正常流程**    | 1.增加分类<br>  1.1库存管理人员选择增加分类<br>  1.2选择增加分类的节点<br>1.4系统提示输入商品名称 <br> 1.5库存管理人员输入名称并确认增加分类<br>  1.6系统给该分类生成一个编号并更新分类信息<br>2.删除分类<br>  2.1库存管理人员选择删除分类<br>  2.2 选择要删除的分类<br>  2.3系统提示是否要删除该分类，操作不可逆<br>  2.4确认删除，系统删除该分类的编号,否则返回上一级<br>  3.修改分类<br>  3.1选择修改分类<br>  3.2选择修改类型<br>  3.3.1选择修改分类名称<br>3.3.2系统提示输入新名称<br>3.3.3库存管理输入新名称并确认<br>3.3.4系统提示修改完成并更新分类信息<br>3.4.1 选择修改分类位置<br>3.4.2选择分类放置的节点<br> 3.4.3确认操作<br> |
| **扩展流程**    | 1.2a该节点下已经存在商品<br>  1.系统提示该节点已存在商品，该节点不可选择<br>2.返回上一操作界面<br>1.3a  系统中已经存在该分类<br>1.系统提示已经存在该分类<br>2.返回上一操作界面<br>2.2a该节点下已经存在商品或者子分类<br>  1.系统提示该分类下存在商品和子分类，是否全部删除<br> |
| **特殊需求**    | 分类的名称长度小于16                              |

### 用例2 商品管理

| ID          | 2                                        |
| ----------- | ---------------------------------------- |
| **创建者**     | 韩新虎                                      |
| **最后一次更新者** | 韩新虎                                      |
| **创建日期**    | 2017-9-15                                |
| **最后更新日期**  | 2017-9-15                                |
| **参与者**     | 库存管理人员，目标是有效管理商品，并对商品信息进行更新。             |
| **触发条件**    | 所存的商品信息发生了变化，或者需要查询商品信息。                 |
| **前置条件**    | 库存管理人员以及被识别和授权。                          |
| **后置条件**    | 系统存储被修改的商品信息，并且更新数据库;在查询情况下，系统显示商品信息。    |
| **优先级**     | 高                                        |
| **正常流程**    | 1.增加商品<br>  1.1库存管理人员选择增加商品<br>  1.2系统要求输入商品基本信息，包括 名称、型号、库存数量、进价、零售价<br>  1.3库存管理人员输入完成保存<br>  1.4选择商品分类<br>1.5系统显示添加成功，并且商品根据其所在的分类以及添加次序自动生成商品编号并更新数据库<br>2.删除商品<br>  2.1库存管理人员选择删除商品<br>  2.2库存管理人员输入关键字<br>  2.3系统显示所有相关商品信息（编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价）<br>  2.4库存管理人员点击删除<br>  2.5系统提示是否确认删除<br>  2.6库存管理人员确认删除<br>  2.7系统更新数据库并显示删除成功<br>3.修改商品<br>  3.1库存管理人员选择修改商品<br>  3.2系统要求输入编号或名称或型号<br>  3.3库存管理人员输入关键字<br>  3.4系统显示满足关键字的商品列表<br>  3.5库存管理人员选择要修改的商品<br>  3.6系统显示该商品的信息<br>  3.7库存管理人员根据需要修改，修改完成保存<br>  3.8系统提示修改完成,并更新数据库<br>4.查询商品信息<br>  4.1库存管理人员选择查询商品信息<br>  4.2系统要求输入编号或名称或型号<br>  4.3库存管理人员输入关键字<br>  4.4系统显示满足关键字的商品列表<br>  4.5库存管理人员选择要查询信息的商品<br>  4.6系统显示该商品的信息<br> |
| **扩展流程**    | 2.4a/3.4a/4.4a 未找到满足关键字的商品<br>  1.系统提示重新输入或者取消操作<br>1.3a商品已存在<br>  1.系统提示商品已存在，添加失败<br>2.7a 需要取消删除<br>  1.库存管理人员选择放弃删除<br>  2.系统取消操作<br>3.7a 修改导致信息重复<br>  1.系统提示信息重复，修改失败 |
| **特殊需求**    | 1.开始规定一个进价和售价作为默认值,保存一个最近的进价和售价属性<br>2.商品编号根据其所在的分类以及添加次序自动生成<br>3.商品的查询可以通过输入关键字，商品编号等进行模糊查找<br> |

## 用例3 库存查看

| ID          | 3                                        |
| ----------- | ---------------------------------------- |
| **创建者**     | 韩新虎                                      |
| **最后一次更新者** | 韩新虎                                      |
| **创建日期**    | 2017-9-17                                |
| **最后更新时间**  | 2017-9-18                                |
| **参与者**     | 库存管理人员，目标是快速、正确地完成查询要求时间段内的库存            |
| **触发条件**    | 库存管理人员要求查看某段时间内的出库入库情况                   |
| **前置条件**    | 库存管理人员已经被识别和认证，且使用系统库存查看入口               |
| **后置条件**    | 无                                        |
| **优先级**     | 高                                        |
| **正常流程**    | 1.库存管理人员选择时间段<br>2.系统给出这一时间段内的所有入库出库情况(出/入库数量/金额， 销售/进货的数量/金额)<br>3.返回上一界面 |
| **扩展流程**    | 1a选择时间错误<br>1.提示输入时间有误<br>2a.无数据 系统提示无出入库情况. |
| **特殊需求**    | 1.库存数量要有合计<br>2.入库出库分开显示<br>3.显示存储数量<br> |

## 用例4 库存盘点

| ID          | 4                                        |
| ----------- | ---------------------------------------- |
| **创建者**     | 韩新虎                                      |
| **最后一次更新者** | 韩新虎                                      |
| **创建日期**    | 2017-9-17                                |
| **最后更新时间**  | 2017-9-18                                |
| **参与者**     | 库存管理人员                                   |
| **触发条件**    | 到达一天中的库存盘点时间                             |
| **前置条件**    | 库存管理人员以及被识别和认证<br> 盘点时间之前有入库或出库记录        |
| **后置条件**    | 生产当天的入库结果                                |
| **优先级**     | 高                                        |
| **正常流程**    | 1.库存管理人员向系统发送盘点请求<br>2.系统列出当天的库存盘点（包括当天的各种商品的名称，型号，库存数量，库存均价，批次，批号，出厂日期）<br>3.库存管理人员查看，确认盘点信息<br> |
| **扩展流程**    | 2a.当天的库存盘点可以按照区位查看<br>3a.可以导出Excel表格     |
| **特殊需求**    | 库存盘点可以显示行号<br>                           |

## 用例5处理库存单据

| ID          | 5                                        |
| ----------- | ---------------------------------------- |
| **创建者**     | 韩新虎                                      |
| **最后一次更新者** | 韩新虎                                      |
| **创建日期**    | 2017.09.17                               |
| **最后一次修改**  | 2017.09.17                               |
| **参与者**     | 库存管理人员                                   |
| **触发条件**    | 收到单据信息                                   |
| **前置条件**    | 库存管理人员已经被识别和认证                           |
| **后置条件**    | 更新库存信息                                   |
| **优先级**     | 高                                        |
| **正常流程**    | 1.库存管理人员选择库存赠送单 <br>2.系统显示库存赠送单列表<br>3库存管理人员选择库存赠送单<br>4.库存管理人员确认赠送并更新库存信息<br>5库存管理人员选择库存报损单或库存报溢单<br>6.系统显示库存报损及报溢单模板并提示输入相关信息<br>7.库存管理人员保存并确认提交<br>8.库存管理人员选择库存报警单<br>9.系统显示库存报警单模板并提示输入具体信息<br>10.库存管理人员保存并确认提交 |
| **扩展流程**    | 2.a 无库存赠送单，提示暂未收到库存赠送单<br>7.a/10.a系统提示输入信息有误，重新填写或者取消该操作<br> |
| **特殊需求**    | 无                                        |

## 用例6 客户管理

| **ID**   | 6                                        | **名称**      | 客户管理 |
| -------- | ---------------------------------------- | ----------- | ---- |
| **创建者**  | 伏家兴                                      | **最后一次更新者** |      |
| **创建日期** | 2017/9/14                                | **最后更新日期**  |      |
| **参与者**  | 进货销售人员，目标是正确快速地完成对客户信息的操作                |             |      |
| **触发条件** | 有客户信息需要改动                                |             |      |
| **前置条件** | 进货销售人员必须已经被识别和授权。                        |             |      |
| **后置条件** | 系统存储日志记录                                 |             |      |
| **优先级**  | 高                                        |             |      |
| **正常流程** | 1.查询客户<br />   1.1 输入关键字（包括编号、分类（进货商、销售商）、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员。） <br />  1.2 系统从数据库中搜索符合关键字信息的客户  <br /> 1.3 系统显示符合搜索条件的所有客户 <br />  2.增加客户<br />   2.1 输入客户的编号、分类（进货商、销售商）、级别（五级，一级普通用户，五级VIP客户）、姓名、电话、地址、邮编、电子邮箱、应收额度、应收、应付、默认业务员。（应收应付不可修改）<br />   2.2 从系统中查找该客户，如果不存在此用户，则添加一则用户信息。 <br />  3．删除客户： <br />  3.1 输入要删除的客户的编号，在数据库中查询此客户<br />   3.2 如果编号一致，则从系统数据库中删除此用户的所有客户信息。 <br />  4．修改客户属性： <br />  4.1 通过关键字搜索或者编号信息来查询客户<br />   4.2 如果查询到用户，对其需要修改的属性进行修改（应收应付不可修改） |             |      |
| **扩展流程** | 1.3a. 数据库中没有存储查询的客户<br />   1. 系统显示不存在该客户，并提示重新查找  <br /> 2.1a. 输入的客户属性有缺少<br />   1. 系统提示缺少信息，提示操作人员核对信息重新输入<br />   2.2a.   数据库中已经存在要增加的客户的信息 <br />  1. 系统显示客户已存在，并提示核对信息重新添加。 <br />  3.1a.   数据库中不存在要删除的客户的编号 <br />  1. 提示该用户不存在并提示操作人员核对信息重新输入  <br /> 4.1a.   查询不到要查找的客户 <br />  1. 提示该用户不存在并提示操作人员核对信息重新输入   <br />4.2a. 操作人员对应收应付信息进行修改<br />   1. 提示该信息不可修改 |             |      |
| **特殊需求** |                                          |             |      |

## 用例7 制定进货单和进货退货单

| **ID**   | 7                                        | **名称**      | 制定进货和进货退货单 |
| -------- | ---------------------------------------- | ----------- | ---------- |
| **创建者**  | 伏家兴                                      | **最后一次更新者** |            |
| **创建日期** | 2017/9/14                                | **最后更新日期**  |            |
| **参与者**  | 进货销售人员，目标是正确快速的制定进货单和进货退货单               |             |            |
| **触发条件** | 有需要处理的进货单或者进货退货单                         |             |            |
| **前置条件** | 进货退货人员必须已经被识别和授权。                        |             |            |
| **后置条件** | 存储制定进货单或者进货退货单的日志，包括操作人、货物信息等。           |             |            |
| **优先级**  | 高                                        |             |            |
| **正常流程** | 1.  操作分为制定进货单和制定进货退货单。<br />   2.  如果选择制定进货单。<br />         新建一个进货单包括：包括：**单据编号**（格式为：JHD-yyyyMMdd-xxxxx，后五位每天从1开始编号，所以一天最多可以生成99999条单子），**供应商，仓库，操作员，入库商品列表，备注，总额合计。**其中入库商品列表包含的信息有：**商品编号，名称（从商品选择界面进行选择），型号，数量，单价（默认为商品信息中的进价），金额，备注**。没有下划线的部分是自动计算并填充进去的。进货单通过审批后，会更改库存数据和客户的应收应付数据。<br />   3.  如果选择制定销售退货单。<br />     新建一个进货退货单，单据号格式为：JHTHD-yyyyMMdd-xxxxx。其余信息和进货单内容相同 |             |            |
| **扩展流程** | 2a.   需要生成的单子超过最大范围（即超过99999条）<br />     1.  系统报错  <br /> 2b.   操作人员遗漏掉某些需要处理的货物信息  <br />        1.  系统提示有信息未填，并督促操作人员进行操作 |             |            |
| **特殊需求** | 1.**单据编号**格式为：JHD-yyyyMMdd-xxxxx，后五位每天从1开始编号，所以一天最多可以生成99999条单子<br>2.需要手动输入的信息有数量，备注<br> |             |            |

 

## 用例8 制定销售单和销售退货单

| **ID**   | 8                                        | **名称**      | 制定进货和进货退货单 |
| -------- | ---------------------------------------- | ----------- | ---------- |
| **创建者**  | 伏家兴                                      | **最后一次更新者** |            |
| **创建日期** | 2017/9/14                                | **最后更新日期**  |            |
| **参与者**  | 进货销售人员，目标是正确快速的制定销售单和销售退货单               |             |            |
| **触发条件** | 有需要处理的销售单或者销售退货单                         |             |            |
| **前置条件** | 进货销售人员必须已经被识别和授权。                        |             |            |
| **后置条件** | 存储销售或者销售退货的日志，包括操作人、货物信息等。               |             |            |
| **优先级**  | 高                                        |             |            |
| **正常流程** | 1.  操作分为制定销售单和制定销售退货单。  <br /> 2.  如果选择制定进货单。<br />        新建一个进货单包括：包括：**单据编号**，**客户**（仅显示销售商），**业务员**（和这个客户打交道的公司员工，可以设置一个客户的默认业务员），**操作员**（当前登录系统的用户），**仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，备注**。出货商品清单中要显示商品的**编号，名称**（从商品选择界面选择）**，**型号**，数量**，单价**（默认为商品信息里的销售价，可修改）**，金额（自动生成），商品备注。销售单通过审批后，会更改库存数据和客户的应收应付数据。 <br />  3.  如果选择制定销售退货单。<br />      新建一个销售退货单，单据号格式为：XSTHD-yyyyMMdd-xxxxx。其余信息和销售单内容相同 |             |            |
| **扩展流程** | 2a.   需要生成的单子超过最大范围（即超过99999条）<br />   1.  系统报错   <br />2b.   操作人员遗漏掉某些需要处理的货物信息  <br />1.  系统提示有信息未填，并督促操作人员进行操作 |             |            |
| **特殊需求** | 1.销售单单据格式为XSD-yyyyMMdd-xxxxx，后五位每天从1开始编号，所以一天最多可以生成99999条单子<br>2.需要手动输入的信息有数量和商品备注。3.退货单单据格式为:XSTHD-yyyyMMdd-xxxxx。其余信息和销售单内容相同. |             |            |

## 用例9 账户管理及操作

| **ID**      | 9                                        |
| ----------- | ---------------------------------------- |
| **创建者**     | 徐光耀                                      |
| **最后一次更新者** | 徐光耀                                      |
| **创建日期**    | 2017-09-14                               |
| **最后更新日期**  | 2017-09-18                               |
| **参与者**     | 财务人员，便于更快捷的查询与操作公司账户                     |
| **触发条件**    | 具有最高权限的使用者有查询与操作账户的请求                    |
| **前置条件**    | 使用者具有最高权限                                |
| **后置条件**    | 系统自动将操作活动记录到系统的日志中                       |
| **优先级**     | 中                                        |
| **正常流程**    | 1、系统身份验证操作人员是否具有修改权限<br>2、财务人员查找账户信息<br>3、系统返回账户的余额和名称，并且等待财务人员的下一步操作<br>4、财务人员输入对账户的修改并保存<br>5、系统保存修改<br> |
| **扩展流程**    | 1a、无权限账户<br>    1、系统提示账户不具有操作权限<br>    2、重新切换账户或取消本次操作<br>2a、无相关信息<br>    1、返回提示无相关满足条件账户<br>4a、新增或修改后的账户名称与已有账户名称同名   <br>      1、系统提示非法名称并且强制进行重新输入<br>5a、数据保存异常<br>    1、系统恢复修改之前的账户状态<br>    2、系统发送提示，显示修改失败并且告知失败原因<br>    3、系统收集错误报告将异常发送给维护人员 |
| **特殊需求**    | 1、账户余额不能修改<br>2、提供模糊查询的选项<br>3、记录操作至系统日志 |

  ## 用例10 制定付款单及现金费用单

| **ID**      | 10                                       |
| ----------- | ---------------------------------------- |
| **创建者**     | 徐光耀                                      |
| **最后一次更新者** | 徐光耀                                      |
| **创建日期**    | 2017/9/14/16:57                          |
| **最后更新日期**  | 2017/9/18/23:51                          |
| **参与者**     | 财务人员，为了使制定付款单据更加自动与规范                    |
| **触发条件**    | 财务人员发出制定付款单或者现金费用单申请                     |
| **前置条件**    | 登陆用户身份已被识别，并且具有制定单据的权限                   |
| **后置条件**    | 付款单或现金费用单必须经过审批，然后自动修改客户应付数据             |
| **优先级**     | 高                                        |
| **正常流程**    | 1、财务人员填写单据编号,操作员（当前登录用户），银行账户，条目清单，总额。条目清单中包括：条目名，金额，备注。<br>2、财务人员提交收款单，系统自动生成报表交付审核<br>3、系统修改账户中的余额<br> |
| **扩展流程**    | 1a、金额为负<br>    1、系统警告，并强制操作员重新修改金额<br>1b、信息缺漏<br>1、系统提示信息缺漏<br>2a、单据号格式非法<br>    1、系统报告单据号格式错误的警告<br>    2、财务人员重新输入单据号<br>1~3a、系统数据传输异常<br>    1、恢复系统状态至未修改前<br>    2、将错误生成报告并发送给系统维护人员 |
| **特殊需求**    | 1、金额不能为负<br>2、审批结束之后财务人员会受到提示信息<br>3、单据编号格式为XJFYD-yyyyMMdd-xxxxx |

 ## 用例11 制定收款单

| **ID**      | 11                                       |
| ----------- | ---------------------------------------- |
| **创建者**     | 徐光耀                                      |
| **最后一次更新者** | 徐光耀                                      |
| **创建日期**    | 2017/9/14/15:24                          |
| **最后更新日期**  | 2017/9/18/23:51                          |
| **参与者**     | 财务人员，为了使制定收款单据更加自动与规范                    |
| **触发条件**    | 财务人员发出制定收款单申请                            |
| **前置条件**    | 登陆用户身份已被识别，并且具有制定收款单权限                   |
| **后置条件**    | 收款单必须经过审批，然后自动修改客户应付数据                   |
| **优先级**     | 高                                        |
| **正常流程**    | 1、财务人员填写单据编号（SKD-yyyyMMdd-xxxxx），客户（同时包含供应商和销售商），操作员（当前登录用户），转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。<br> 2、财务人员提交收款单，系统自动生成报表交付审核<br> 3、系统修改账户中的金额<br> |
| **扩展流程**    | 1a、转账金额为负<br>    1、系统警告，并强制操作员重新修改金额<br>1b、单据号格式错误<br>    1、系统提示单据号格式错误<br>    2、提示并等待重新输入<br>1c、信息缺漏<br>1、系统提示信息缺漏<br>1~3a、系统数据传输异常<br>    1、恢复系统状态至未修改前<br>    2、将错误生成报告并发送给系统维护人员 |
| **特殊需求**    | 1、转账金额不能为负<br>2、单据编号格式为SKD-yyyyMMdd-xxxxx |

## 用例12 查看导出及调整报表

| ID          | 12                                       |
| :---------- | :--------------------------------------- |
| **创建者**     | 徐光耀                                      |
| **最后一次更新者** | 徐光耀                                      |
| **创建日期**    | 2017/9/14/16:50                          |
| **最后更新日期**  | 2017/9/18/23:51                          |
| **参与者**     | 财务人员，为了便于查看报表并提高实时更新的速度                  |
| **触发条件**    | 财务人员发出查看报表申请                             |
| **前置条件**    | 登陆用户身份已被识别，并且具有制定单据的权限                   |
| **后置条件**    | 无                                        |
| **优先级**     | 低                                        |
| **正常流程**    | 1.0、财务人员申请查看销售明细表<br> 1、财务人员输入筛选条件：时间区间，商品名，客户，业务员，仓库<br> 2、系统返回满足条件的商品销售记录，记录中包含时间（精确到天），商品名，型号，数量，单价，总额<br> 3、财务人员退出表单或者导出表单<br> 1.1、财务人员申请查看经营历程表<br> 1、财务人员输入筛选条件：时间区间，单据类型，客户，业务员，仓库<br> 2、系统返回报表包含：销售类单据（销售出货单，销售退货单）、进货类单据（进货单，进货退货单）、 财务类单据（付款单，收款单，现金费用单）、 库存类单据（报溢单，报损单，赠送单）<br> 3、财务人员向系统申请产生新报表<br> 4、财务人员采用红冲的方法对表单进行调整<br> 5、系统接收表单并修改数据<br> 6、财务人员退出表单或者导出表单<br> 1.3、财务人员申请查看经营情况表<br>     1、财务人员选择要显示的时间段<br> 2、系统返回表单包含：销售收入、商品类收入（商品报溢收入 成本调价收入 进货退货差价 代金券与实际收款差额收入，显示折让后总收入，并显示折让了多少销售成本）、商品类支出（商品报损 商品赠出，显示总支出）、利润（折让后总收入-总支出）<br> 3、财务人员退出表单或者导出表单<br> |
| **扩展流程**    | 1a、金额为负<br>    1、系统警告，并强制操作员重新修改金额<br>1.1~1.2a、无满足条件搜索项<br>      1、提示无满足条件搜索项<br>1.0 /1.1/1.2/1.3/、1~2a、系统返回报表失败<br>    1、系统还原修改前的系统状态<br>    2、系统分析错误原因并发送报告给系统维护人员<br>     3、系统提示传输异常，修改失败，提示财务人员等待<br>    4、系统生成错误报告发送给总经理 |
| **特殊需求**    | 1、金额不能为负，所有表单均可以导出<br>                   |

  ## 用例13 期初建账

| **创建者**     | 徐光耀                                      |
| ----------- | ---------------------------------------- |
| **ID**      | 13                                       |
| **最后一次更新者** | 徐光耀                                      |
| **创建日期**    | 2017/9/14/18:23                          |
| **最后更新日期**  | 2017/9/18/23:51                          |
| **参与者**     | 财务人员，使账目更加规范化，便于管理                       |
| **触发条件**    | 财务人员向系统发出建账申请                            |
| **前置条件**    | 登陆用户身份已被识别，并且具有制立账户的权限                   |
| **后置条件**    | 无                                        |
| **优先级**     | 中                                        |
| **正常流程**    | 1、财务人员填写添加商品信息（商品分类，某一商品的名称，类别，型号，进价/售价(默认为上年平均)，最近进价和最近售价留空），客户信息（客户分类，某一个客户的名称，联系方式等，应收应付(之前遗留)），银行账户信息（名称，余额）<br> 2、系统接收消息并且更新数据库<br> |
| **扩展流程**    | 1a、账户名称重复<br>    1、系统警告，并强制操作员重新修改名称<br>1~2a、系统接收或者传输异常<br>    1、返回未修改之前的状态<br>    2、系统提示初始化失败<br>    3、将错误信息生成报表发送给系统维护人员 |
| **特殊需求**    | 1、之后的一切操作将会改变系统里的信息，但不会改变期初信息。期初信息随时可查   |

## 用例14 查看导出报表

| **ID**   | 14                                       | **名称**      | 查看导出报表    |
| -------- | ---------------------------------------- | ----------- | --------- |
| **创建者**  | 刘雅歆                                      | **最后一次更新者** | 刘雅歆       |
| **创建日期** | 2017.9.14                                | **最后更新日期**  | 2017.9.17 |
| **参与者**  | 总经理，目标是方便地阅读报表以便制定合理的销售策略                |             |           |
| **触发条件** | 参与者（总经理）决定查看报表                           |             |           |
| **前置条件** | 用户必须已经登录系统                               |             |           |
| **后置条件** | 系统中的销售数据不会发生改变，但系统记录日志会增加一条记录描述本次查看的相关信息 |             |           |
| **优先级**  | 高                                        |             |           |
| **正常流程** | 1.用户登录系统<br/>2.用户决定查看报表<br/>3.用户选择需要查看的报表类型为销售明细表、经营历程表、经营情况表中的一种表格，系统读取报表类型<br/>4.1 系统读取报表类型为销售明细表，那么系统要求用户选择**时间区间，商品名，客户，业务员，仓库**中的一个或多个条件作为筛选条件<br/>4.2 系统读取报表类型为经营历程表，那么系统要求用户选择**时间区间，单据类型，客户，业务员，仓库**中的一个或多个作为筛选条件<br/>4.3  系统读取报表类型为经营情况表，那么系统要求用户选择时间区间作为筛选条件<br/>5.   系统读取筛选条件<br/>6.1 客户选择销售明细表，那么系统以列表形式输出符合筛选条件的**时间（精确到天），商品名，型号，数量，单价，总额**共六种数据信息<br/>6.2 客户选择经营历程表，那么系统输出符合筛选条件的销售类单据（销售出货单，销售退货单）、进货类单据（进货单，进货退货单）、财务类单据（付款单，收款单，现金费用单）和库存类单据（报溢单，报损单，赠送单）<br/>6.3  客户选择经营情况表，那么系统输出符合筛选条件的：1.**收入类**：**销售收入、商品类收入**（商品报溢收入 成本调价收入 进货退货差价 代金券与实际收款差额收入）。收入类显示**折让后总收入**，并显示折让了多少。**2. ****支出类：销售成本、商品类支出**（商品报损 商品赠出）。支出类显示**总支出**。**3. ****利润：折让后总收入****-****总支出。**共三种信息<br/>7.用户完成报表阅读并选择继续<br/>8.系统询问用户是否需要导出报表<br/>9.如果用户要求导出报表，那么系统将报表以excel形式导出到本地，否则继续下一流程<br/>10.系统询问用户是否需要继续查询报表<br/>11.如果用户选择需要，那么返回第3步<br/>12.系统日志根据用户查询的信息增加一条记录 |             |           |
|          | 1a、权限不足：系统提示权限不足并拒绝提供报表<br/>5a、筛选条件不合理（如选择的商品名不存在）系统提示筛选条件有误并清空当前条件等待重新输入<br/>5b、当前筛选条件下没有符合要求的数据系统提示没有满足条件的报表 |             |           |
| **特殊需求** | 1.如果未来加入新的报表类型系统应当允许查询                   |             |           |

## 用例15 审批单据

| **ID**   | 15                                       | **名称**      | 审批单据      |
| -------- | ---------------------------------------- | ----------- | --------- |
| **创建者**  | 刘雅歆                                      | **最后一次更新者** | 刘雅歆       |
| **创建日期** | 2017.9.14                                | **最后更新日期**  | 2017.9.17 |
| **参与者**  | 总经理，目标是及时准确地审批其他系统用户提交的报表以保证相关工作顺利进行     |             |           |
| **触发条件** | 系统有单据生成，并且参与者（总经理）决定审批单据                 |             |           |
| **前置条件** | 用户必须已经登录系统                               |             |           |
| **后置条件** | 修改系统中被审批单据的状态，从待审批变为已审批，并给单据提交用户发送信息表明单据当前状态，系统记录日志会增加一条记录描述单据被审批过程的信息 |             |           |
| **优先级**  | 高                                        |             |           |
| **正常流程** | 1.用户登录系统<br/>2.用户决定审批单据<br/>3.用户向系统要求审批单据<br/>4.系统读取当前提交单据列表<br/>5.系统显示当前提交单据列表<br/>6.用户选择一个或多个单据进行审批，可以有批准、不批准两种选项<br/>7.用户提交当前单据审批结果<br/>8.系统修改被审批单据状态，从提交改为已审批<br/>9.系统修改被审批通过单据对应的相关数据：库存赠送单：根据单据修改商品对应的库存数量库存报溢单：根据单据增加该商品的库存数量库存报损单：根据单据减少该商品的库存数量进货单/进货退货单/销售单/销售退货单：根据单据修改库存数据和客户的应收应付数据收款单/付款单：根据单据修改客户的应付数据<br/>10.系统询问用户是否需要继续审批其他单据<br/>11.系统读取用户反馈，如果需要则返回第4条，如果不需要则结束当前操作<br/>12.系统日志中增加本次单据审核的相关记录 |             |           |
| **扩展流程** | 3a、权限不足：<br/>系统提示权限不足并拒绝提供单据         <br/>4a、提交单据列表为空        <br/>1.系统提示提交单据列表为空并拒绝继续进行之后的操作<br/>11a、当前筛选条件下没有更多单据<br/>系统不再询问而是显示提交单据为空 |             |           |
| **特殊需求** | 1.未来如果增加单据类型则系统应该支持新类型单据的审批              |             |           |

##用例16 查询日志

| **ID**   | 16                                       | **名称**      | 查询日志      |
| -------- | ---------------------------------------- | ----------- | --------- |
| **创建者**  | 刘雅歆                                      | **最后一次更新者** | 刘雅歆       |
| **创建日期** | 2017.9.14                                | **最后更新日期**  | 2017.9.17 |
| **参与者**  | 总经理，目标是观察其他用户的交易记录，监测系统运行状况              |             |           |
| **触发条件** | 参与者决定调取日志内容                              |             |           |
| **前置条件** | 用户必须已经登录系统                               |             |           |
| **后置条件** | 数据项不会发生变化，系统日志中增加一条记录，记录查询日志的用户和时间       |             |           |
| **优先级**  | 高                                        |             |           |
| **正常流程** | 1.用户登录系统<br/>2.用户决定查询日志<br/>3.用户向系统要求查询数据<br/>4.系统调取所有的系统日志<br/>5.系统输出所有的系统日志<br/>6.用户阅读日志后关闭系统日志<br/>7.系统在日志中增加一条记录，记录查询日志的用户和时间 |             |           |
| **扩展流程** | 3a、权限不足：<br/>系统提示权限不足并拒绝提供日志             |             |           |
| **特殊需求** | 无                                        |             |           |

##用例17 制定销售策略

| **ID**   | 17                                       | **名称**      | 制定促销策略    |
| -------- | ---------------------------------------- | ----------- | --------- |
| **创建者**  | 刘雅歆                                      | **最后一次更新者** | 刘雅歆       |
| **创建日期** | 2017.9.14                                | **最后更新日期**  | 2017.9.15 |
| **参与者**  | 总经理或财务管理人员，目标是提高销售总额，增加公司盈利              |             |           |
| **触发条件** | 参与者根据当前经营情况决定制定促销策略                      |             |           |
| **前置条件** | 用户必须已经登录系统                               |             |           |
| **后置条件** | 促销策略针对的用户的价格折让数、可用代金券数量、可获得赠品参数被更新，策略针对的商品的价格被更新、不同总价对应的促销策略被更新。保存修改至数据库。 |             |           |
| **优先级**  | 高                                        |             |           |
| **正常流程** | 1.总经理登录系统<br/>2.总经理要求制定促销策略<br/>3.系统提示总经理选择活动的开始时间和结束时间<br/>4.总经理输入开始时间和结束时间<br/>5.系统提示总经理选择要制定的促销策略类型<br/>6.总经理选择一种促销策略类型<br/>7.1 系统读取总经理选择的促销类型是针对不同级别的用户赠送赠品：<br/>1.系统提示总经理选择针对的用户级别<br/>2.总经理输入针对的用户级别<br/>3.系统提示总经理选择赠品名称、数量<br/>4.总经理输入赠品名称、数量<br/>5.系统获取总经理的输入，记录赠品信息<br/>6.系统显示赠品列表<br/>7.系统生成库存赠送单<br/>7.2 系统读取总经理选择的促销类型是针对不同级别的用户提供价格折让<br/>1.系统提示总经理选择针对的用户级别<br/>2.总经理输入针对的用户级别<br/>3.系统读取总经理选择的用户级别<br/>4.系统提示总经理输入价格折让额度<br/>5.总经理输入价格折让额度<br/>6.系统读取价格折让额度，记录价格折让信息<br/>7.系统显示价格折让列表<br/>7.3 系统读取总经理选择的是针对不同级别的用户提供代金券<br/>1.系统提示总经理选择针对的用户级别<br/>2.总经理输入针对的用户级别系统<br/>3.读取总经理选择的用户级别<br/>4.系统提示总经理输入代金券面额、张数<br/>5.总经理输入代金券面额、张数<br/>6.系统读取代金券面额、张数，记录代金券额度信息<br/>7.系统显示当前不同级别客户可用的代金券列表<br/>7.4 系统读取总经理选择的是制定特价包（组合商品降价）<br/>1.系统提示总经理选择包内商品、每个商品的降价额度<br/>2.总经理输入包内商品及每个商品的降价额度<br/>3.系统读取包内商品及每个商品的降价额度，记录特价包信息<br/>4.系统显示当前特价包列表<br/>7.5 系统读取总经理选择的促销类型是针对不同总价赠送赠品：<br/>1.系统提示总经理选择针对的总价区间<br/>2.总经理输入针对的总价区间<br/>3.系统提示总经理选择赠品名称、数量<br/>4.总经理输入赠品名称、数量<br/>5.系统获取总经理的输入，记录赠品信息<br/>6.系统显示赠品列表<br/7.系统生成库存赠送单<br/>>7.6 系统读取总经理选择的是针对不同总价提供代金券<br/>1.系统提示总经理选择针对的总价区间<br/>2.总经理输入针对的总价<br/>3.系统读取总经理选择的总价区间<br/>4.系统提示总经理输入代金券面额、张数<br/>5.总经理输入代金券面额、张数<br/>6.系统读取代金券面额、张数，记录代金券额度信息<br/>7.系统显示当前不同总价区间可用的代金券列表<br/>8.重复第2步~第7步直到总经理完成所有策略制定 |             |           |
| **扩展流程** | 4.1a输入时间冲突<br>1.提示重新输入时间<br>7.1.6a、总经理要求移除赠品    <br/>   1.系统显示目前存在的赠品列表      <br/>  2.总经理选择要移除的赠品     <br/>   3.系统读取总经理输入，修改赠品信息        <br/>      4.系统显示赠品列表已修改<br/>7.2.7a、总经理要求修改价格折让信息 <br/>       1.总经理选择价格折让信息并修改数据        <br/>2.系统读取总经理修改的信息项，修改价格折让信息       <br/> 3.系统显示信息已修改<br/>7.3.7a、总经理要求修改代金券额度或用户类型      <br/>  1.总经理选择代金券信息并修改数据 <br/>       2.系统读取修改的信息项，修改代金券额度或用户类型      <br/>  3.系统显示信息已修改<br/>7.4.4a、总经理要求修改特价包信息     <br/>   1.总经理选择特价包信息并修改数据     <br/>   2.系统读取修改的信息项，修改特价包信息    <br/>    3.系统显示信息已修改<br/>7.5.6a、总经理要求移除赠品    <br/>    1.系统显示目前存在的赠品列表     <br/>   2.总经理选择要移除的赠品        <br/>3.系统读取总经理输入，修改赠品信息           <br/>   4.系统显示赠品列表已修改<br/>7.6.7a、总经理要求修改代金券额度或针对的总价     <br/>   1.总经理选择代金券信息并修改数据   <br/>     2.系统读取修改的信息项，修改代金券额度或针对的总价       <br/> 3.系统显示信息已修改 |             |           |
| **特殊需求** | 1.未来如果增加新的策略类型应支持对新策略的制定                 |             |           |